exec dunst
exec nm-applet --indicator
exec polkit_startup
exec blueman-applet
exec xsettingsd
exec autotiling
exec dropbox start -i
exec_always "pkill wl-paste; wl-paste -t text --watch clipman store --no-persist"
exec /usr/libexec/xdg-desktop-portal


# Polkit
exec lxpolkit

# Gnome Keyring
# exec gnome-keyring-daemon --daemonize --start --components='gpg,pkcs11,secrets,ssh'

# Needed for Gnome apps.
exec systemctl --user import-environment DISPLAY WAYLAND_DISPLAY SWAYSOCK
exec hash dbus-update-activation-environment 2>/dev/null && \
    dbus-update-activation-environment --systemd DBUS_SESSION_BUS_ADDRESS DISPLAY WAYLAND_DISPLAY SWAYSOCK XDG_CURRENT_DESKTOP=sway
    # QT_WAYLAND_DISABLE_WINDOWDECORATION="1" QT_QPA_PLATFORM=wayland


# Allows i3 to bind the powerbutton properly.
exec systemd-inhibit --what=handle-power-key sleep infinity

exec_always setbg "/usr/share/backgrounds/gnome/libadwaita-d.jpg"

# exec_always "QT_QPA_PLATFORM='xcb' flatpak run com.ulduzsoft.Birdtray"

exec swayidle -w \
    timeout 295 'swaymsg output * dpms off' \
    timeout 300 'sessionctl lock' \
    resume 'swaymsg output * dpms on' \
    before-sleep 'playerctl pause' \
    before-sleep 'sessionctl instant_lock' \
    after-resume 'clamshell'

for_window [class=".*"] inhibit_idle fullscreen
for_window [app_id=".*"] inhibit_idle fullscreen
