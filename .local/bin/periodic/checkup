#!/bin/sh

# Syncs repositories and downloads updates, meant to be run as a cronjob.

ping -q -w 1 -c 1 `ip r | grep -m 1 default | cut -d ' ' -f 3` >/dev/null || exit

notify-send "Checking for pacakge updates..."

checkupdates || notify-send "Error Checking for updates."
pkill -RTMIN+8 i3blocks

if pacman -Qu | grep -v "\[ignored\]"
then
	notify-send "Package updates available. Click statusbar icon (ï€¡) for update."
else
	notify-send "Repository sync complete. No new packages for update."
fi
