#!/usr/bin/env bash

# i3 / sway start script. Shoud be sourced in .profile

export SUDO_ASKPASS="$HOME/.local/bin/wm-scripts/dmenupass"
#export EDITOR="nvim"
export EDITOR="code"
export TERMINAL="gnome-terminal"
export BROWSER="firefox"
export READER="zathura"
export QT_QPA_PLATFORMTHEME=qt5ct

if [ -f /usr/bin/i3 ] && [ ! $(pgrep -x Xorg) ]; then

	[ ! -d ~/.local/xorg ] && mkdir -p ~/.local/share/xorg
	logfile=~/.local/share/xorg/$(date +%Y_%m_%d-%Hh%Mm%Ss).log
	touch "$logfile"
	exec startx /usr/bin/i3 > "$logfile" 2>&1

elif [ -f /usr/bin/sway ] && [ ! $(pgrep -x sway) ]; then

	# Variables needed by only by sway.
	export XKB_DEFAULT_LAYOUT=us,gr
	#export XKB_DEFAULT_OPTIONS=grp:alt_shift_toggle
	#export QT_QPA_PLATFORM=wayland
	export QT_WAYLAND_DISABLE_WINDOWDECORATION="1"
	#export MOZ_ENABLE_WAYLAND=1
	[ ! -d ~/.local/xorg ] && mkdir -p ~/.local/share/sway
	logfile=~/.local/share/sway/$(date +%Y_%m_%d-%Hh%Mm%Ss).log
	sway  > "$logfile" 2>&1
fi
